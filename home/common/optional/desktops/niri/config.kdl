//order matters
include "inputs.kdl"
include "outputs.kdl"
include "binds.kdl"
include "rules.kdl"

//
// ========== Named Workspaces ==========
//
workspace "8_l" {
    open-on-output "DP-2"
}
workspace "9_u" {
    open-on-output "HDMI-A-1"
}
workspace "0_r" {
    open-on-output "DP-3"
}
// order needs to be descending
workspace "5_gmz" {
    open-on-output "DP-1"
}
workspace "4_gig" {
    open-on-output "DP-1"
}
workspace "3_edu" {
    open-on-output "DP-1"
}
workspace "2_uci" {
    open-on-output "DP-1"
}
workspace "1_dev" {
    open-on-output "DP-1"
}

//
// ========== Animations ==========
//
animations {
    //FIXME(niri): go through available options
	// Whether to disable animations.
	//off

	// Slow down or speed up animations by this factor. Values below 1 speed animations up.
	slowdown 0.7
}

//
// ========== Overview screen ==========
//
overview {
    //FIXME(niri): go through available options
	// Color of the backdrop.
	backdrop-color "#17171a"

	// Configuration of shadows around workspaces in the overview.
	workspace-shadow {
		softness 40
		spread 20
		offset x=0 y=0
		color "#00000088"
	}
}

//
// ========== Startup ==========
//
spawn-at-startup "obsidian"
spawn-at-startup "copyq"
spawn-at-startup "signal-desktop"
spawn-at-startup "brave"
spawn-at-startup "ghostty --title=btop -e btop"
spawn-at-startup "/run/current-system/sw/bin/protonvpn-app"
spawn-at-startup "yubioath-flutter"
hotkey-overlay { skip-at-startup; }

//
// ========== Miscellaneous ==========
//

screenshot-path null
//screenshot-path "~/downloads/screenshots/screenshot from %Y-%m-%d %H-%M-%S.png"

// Disable client-side decorations
// FIXME(niri): test this on or off
prefer-no-csd

switch-events {
    lid-close { spawn "notify-send" "The laptop lid is closed."; }
    lid-open { spawn "notify-send" "The laptop lid is open."; }
}

environment {
	// Set the current desktop name.
	XDG_CURRENT_DESKTOP "niri"
	GDK_BACKEND "wayland"
	QT_QPA_PLATFORM "wayland"

	// Qt: Enable automatic scaling based on the monitor's pixel density.
	QT_AUTO_SCREEN_SCALE_FACTOR "1"

	// Qt: Disable window decorations on QT applications.
	QT_WAYLAND_DISABLE_WINDOWDECORATION "1"

	// Run SDL2 applications on Wayland.
	SDL_VIDEODRIVER "wayland"

	// Force Clutter applications to use the Wayland backend.
	CLUTTER_BACKEND "wayland"
}
